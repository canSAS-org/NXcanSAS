

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1.2.3.2. Rules for Storing Data Items in NeXus Files &mdash; NeXus: Manual 3.1 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '3.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="copyright.html" />
    <link rel="top" title="NeXus: Manual 3.1 documentation" href="index.html" />
    <link rel="up" title="1.2. NeXus Design" href="design.html" />
    <link rel="next" title="1.2.3.3. Physical File format" href="fileformat.html" />
    <link rel="prev" title="1.2.3.1. Rules for Structuring Information in NeXus Files" href="rules.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="fileformat.html" title="1.2.3.3. Physical File format"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="rules.html" title="1.2.3.1. Rules for Structuring Information in NeXus Files"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">NeXus: Manual 3.1 documentation</a> &raquo;</li>
          <li><a href="user_manual.html" >1. NeXus: User Manual</a> &raquo;</li>
          <li><a href="design.html" accesskey="U">1.2. NeXus Design</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/nexuslogo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1.2.3.2. Rules for Storing Data Items in NeXus Files</a><ul>
<li><a class="reference internal" href="#naming-conventions">Naming Conventions</a></li>
<li><a class="reference internal" href="#nexus-array-storage-order">NeXus Array Storage Order</a><ul>
<li><a class="reference internal" href="#non-c-storage-order">Non C Storage Order</a></li>
</ul>
</li>
<li><a class="reference internal" href="#nexus-data-types">NeXus Data Types</a><ul>
<li><a class="reference internal" href="#nexus-dates-and-times">NeXus dates and times</a></li>
</ul>
</li>
<li><a class="reference internal" href="#nexus-data-units">NeXus Data Units</a></li>
<li><a class="reference internal" href="#linking-multi-dimensional-data-with-axis-data">Linking Multi Dimensional Data with Axis Data</a><ul>
<li><a class="reference internal" href="#linking-by-name-using-the-axes-attribute">Linking by name using the <tt class="docutils literal"><span class="pre">axes</span></tt> attribute</a></li>
<li><a class="reference internal" href="#linking-by-dimension-number-using-the-axis-attribute">Linking by dimension number using the <tt class="docutils literal"><span class="pre">axis</span></tt> attribute</a></li>
<li><a class="reference internal" href="#discussion-of-the-two-linking-methods">Discussion of the two linking methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#storing-detectors">Storing Detectors</a></li>
<li><a class="reference internal" href="#monitors-are-special">Monitors are Special</a></li>
<li><a class="reference internal" href="#find-the-plottable-data">Find the plottable data</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="rules.html"
                        title="previous chapter">1.2.3.1. Rules for Structuring Information in NeXus Files</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="fileformat.html"
                        title="next chapter">1.2.3.3. Physical File format</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/datarules.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="rules-for-storing-data-items-in-nexus-files">
<span id="datarules"></span><h1>1.2.3.2. Rules for Storing Data Items in NeXus Files<a class="headerlink" href="#rules-for-storing-data-items-in-nexus-files" title="Permalink to this headline">¶</a></h1>
<p>This section describes the rules which apply for storing single data fields in data files.</p>
<div class="section" id="naming-conventions">
<span id="design-naming"></span><h2>Naming Conventions<a class="headerlink" href="#naming-conventions" title="Permalink to this headline">¶</a></h2>
<p id="index-0">Group and field Names used within NeXus follow a naming convention
described by the following <span class="target" id="index-1"></span>rules:</p>
<ul class="simple">
<li>The names of NeXus <em>group</em> and <em>field</em> items
must only contain a restricted set of characters.
This set may be described by a regular expression
syntax <span class="target" id="index-2"></span>regular expression
<a class="reference internal" href="#regexpname"><em>regular expression syntax</em></a>,
as described below.</li>
<li>For the class names <a class="footnote-reference" href="#id2" id="id1">[1]</a> of NeXus <em>group</em> items,
the prefix <em>NX</em> is reserved.
Thus all NeXus class names start with NX.
The chapter titled <a class="reference internal" href="ref_doc.html#referencedocumentation"><em>NeXus: Reference Documentation</em></a> lists the
available NeXus class names as either <em>base classes</em>,
<em>application definitions</em>, or <em>contributed definitions</em>.</li>
</ul>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>The <em>class name</em> is the value assigned to the
<em>NX_class</em> attribute of an HDF5 group in the NeXus data file.
This <em>class name</em> is different than the <em>name</em> of the HDF5 group.
This is important when not using the NAPI to either read or write
the HDF5 data file.</td></tr>
</tbody>
</table>
<div class="compound">
<p class="compound-middle rubric" id="regexpname">Regular expression pattern for NXDL group and field names</p>
<p class="compound-middle">It is recommended that all group and field names
contain only these characters:</p>
<ul class="compound-middle simple">
<li>lower case letters</li>
<li>digits</li>
<li>&#8220;_&#8221; (underscore character)</li>
</ul>
<p class="compound-middle">and that they begin with a lower case letter.
This is the regular expression used to check
this recommendation.</p>
<div class="compound-middle highlight-guess"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">z_</span><span class="p">][</span><span class="n">a</span><span class="o">-</span><span class="n">z</span><span class="err">\</span><span class="n">d_</span><span class="p">]</span><span class="o">*</span>
</pre></div>
</td></tr></table></div>
<p class="compound-middle">The length should be limited to no more than
63 characters (imposed by the HDF5 <span class="target" id="index-3"></span>rules for names).</p>
<p class="compound-middle">It is recognized that some facilities will construct
group and field names with upper case letters.  <em>NeXus data
files with upper case characters in the group or field
names might not be accepted by all software that reads NeXus
data files.</em>  Hence, group and field names that do not
pass the regular expression above but pass this
expression:</p>
<div class="compound-middle highlight-guess"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="p">[</span><span class="n">A</span><span class="o">-</span><span class="n">Za</span><span class="o">-</span><span class="n">z_</span><span class="p">][</span><span class="err">\</span><span class="n">w_</span><span class="p">]</span><span class="o">*</span>
</pre></div>
</td></tr></table></div>
<p class="compound-last">will be flagged as a warning during data file validation.</p>
</div>
<p class="rubric">Use of underscore in descriptive names</p>
<p>Sometimes it is necessary to combine words in order to build a
descriptive name for a data field or a group.
In such cases lowercase words are connected by underscores.</p>
<div class="highlight-guess"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">number_of_lenses</span>
</pre></div>
</td></tr></table></div>
<p>For all data fields, only names from the NeXus base class dictionaries should be used.
If a data field name or even a complete component is missing,
please suggest the addition to the <a class="reference internal" href="niac.html#niac"><em>NIAC: The NeXus International Advisory Committee</em></a>. The addition will usually be
accepted provided it is not a duplication of an existing field and
adequately documented.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The NeXus base classes provide a comprehensive dictionary of terms that can be used for each class.
The expected spelling and definition of each term is specified in the base classes.
It is not required to provide all the terms specified in a base class.
Terms with other names are permitted but might not be recognized by standard software.
Rather than persist in using names not specified in the standard, please suggest additions to the <a class="reference internal" href="niac.html#niac"><em>NIAC: The NeXus International Advisory Committee</em></a>.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="nexus-array-storage-order">
<span id="design-arraystorageorder"></span><h2>NeXus Array Storage Order<a class="headerlink" href="#nexus-array-storage-order" title="Permalink to this headline">¶</a></h2>
<p>NeXus stores <span class="target" id="index-4"></span>multi-dimensional
arrays of physical values in C language storage order,
where the last dimension is the fastest varying. This is the rule.
<em>Good reasons are required to deviate from this rule.</em></p>
<p>It is possible to store data in storage orders other than C language order.</p>
<p>As well it is possible to specify that the data needs to be converted first
before being useful.  Consider one situation, when data must be
streamed to disk as fast as possible and conversion to C language
storage order causes unnecessary latency.  This case presents a
good reason to make an exception to the standard rule.</p>
<div class="section" id="non-c-storage-order">
<span id="design-noncstorageorder"></span><span id="index-5"></span><h3>Non C Storage Order<a class="headerlink" href="#non-c-storage-order" title="Permalink to this headline">¶</a></h3>
<p>In order to indicate that the storage order is different from C storage order two
additional data set attributes, offset and stride, have to be stored which together define the storage
layout of the data. Offset and stride contain rank numbers according to the rank of the multidimensional
data set. Offset describes the step to make when the dimension is multiplied by 1. Stride defines the step to
make when incrementing the dimension. This is best explained by some examples.</p>
<div class="compound">
<p class="compound-first rubric">Offset and Stride for 1 D data:</p>
<div class="compound-last highlight-guess"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre>   <span class="o">*</span> <span class="n">raw</span> <span class="n">data</span> <span class="o">=</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span>
      <span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">10</span> <span class="p">}</span>  <span class="c1">// assume uniform overall array dimensions</span>

   <span class="o">*</span> <span class="k">default</span> <span class="n">stride</span><span class="o">:</span>
      <span class="n">stride</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">1</span> <span class="p">}</span>
      <span class="n">offset</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">}</span>
      <span class="k">for</span> <span class="n">i</span><span class="o">:</span>
         <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">:</span>
            <span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span>

   <span class="o">*</span> <span class="n">reverse</span> <span class="n">stride</span><span class="o">:</span>
      <span class="n">stride</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1</span> <span class="p">}</span>
      <span class="n">offset</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">9</span> <span class="p">}</span>
      <span class="k">for</span> <span class="n">i</span><span class="o">:</span>
         <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">:</span>
            <span class="mi">9</span> <span class="mi">8</span> <span class="mi">7</span> <span class="mi">6</span> <span class="mi">5</span> <span class="mi">4</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">0</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="compound">
<p class="compound-first rubric">Offset and Stride for 2D Data</p>
<div class="compound-last highlight-guess"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="highlight"><pre>   <span class="o">*</span> <span class="n">raw</span> <span class="n">data</span> <span class="o">=</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span> <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span> <span class="mi">13</span> <span class="mi">14</span> <span class="mi">15</span> <span class="mi">16</span> <span class="mi">17</span> <span class="mi">18</span> <span class="mi">19</span>
      <span class="n">size</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span> <span class="p">}</span>  <span class="c1">// assume uniform overall array dimensions</span>

   <span class="o">*</span> <span class="n">row</span> <span class="n">major</span> <span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="n">stride</span><span class="o">:</span>
      <span class="n">stride</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span> <span class="p">}</span>
      <span class="n">offset</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">}</span>
      <span class="k">for</span> <span class="n">i</span><span class="o">:</span>
         <span class="k">for</span> <span class="n">j</span><span class="o">:</span>
            <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">:</span>
               <span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span>
               <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span>
               <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span> <span class="mi">13</span> <span class="mi">14</span>
               <span class="mi">15</span> <span class="mi">16</span> <span class="mi">17</span> <span class="mi">18</span> <span class="mi">19</span>

   <span class="o">*</span> <span class="n">column</span> <span class="n">major</span> <span class="p">(</span><span class="n">Fortran</span><span class="p">)</span> <span class="n">stride</span><span class="o">:</span>
      <span class="n">stride</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span> <span class="p">}</span>
      <span class="n">offset</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">}</span>
      <span class="k">for</span> <span class="n">i</span><span class="o">:</span>
         <span class="k">for</span> <span class="n">j</span><span class="o">:</span>
            <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">:</span>
               <span class="mi">0</span> <span class="mi">4</span> <span class="mi">8</span> <span class="mi">12</span> <span class="mi">16</span>
               <span class="mi">1</span> <span class="mi">5</span> <span class="mi">9</span> <span class="mi">13</span> <span class="mi">17</span>
               <span class="mi">2</span> <span class="mi">6</span> <span class="mi">10</span> <span class="mi">14</span> <span class="mi">18</span>
               <span class="mi">3</span> <span class="mi">7</span> <span class="mi">11</span> <span class="mi">15</span> <span class="mi">19</span>

   <span class="o">*</span> <span class="s">&quot;crazy reverse&quot;</span> <span class="n">row</span> <span class="n">major</span> <span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="n">stride</span><span class="o">:</span>
      <span class="n">stride</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="p">}</span>
      <span class="n">offset</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span> <span class="p">}</span>
      <span class="k">for</span> <span class="n">i</span><span class="o">:</span>
         <span class="k">for</span> <span class="n">j</span><span class="o">:</span>
            <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">:</span>
               <span class="mi">19</span> <span class="mi">18</span> <span class="mi">17</span> <span class="mi">16</span> <span class="mi">15</span>
               <span class="mi">14</span> <span class="mi">13</span> <span class="mi">12</span> <span class="mi">11</span> <span class="mi">10</span>
               <span class="mi">9</span> <span class="mi">8</span> <span class="mi">7</span> <span class="mi">6</span> <span class="mi">5</span>
               <span class="mi">4</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">0</span>   
</pre></div>
</td></tr></table></div>
</div>
<div class="compound">
<p class="compound-first rubric">Offset and Stride for 3D Data</p>
<div class="compound-last highlight-guess"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre></div></td><td class="code"><div class="highlight"><pre>  <span class="o">*</span> <span class="n">raw</span> <span class="n">data</span> <span class="o">=</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span> <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span> <span class="mi">13</span> <span class="mi">14</span> <span class="mi">15</span> <span class="mi">16</span> <span class="mi">17</span> <span class="mi">18</span> <span class="mi">19</span>
         <span class="mi">20</span> <span class="mi">21</span> <span class="mi">22</span> <span class="mi">23</span> <span class="mi">24</span> <span class="mi">25</span> <span class="mi">26</span> <span class="mi">27</span> <span class="mi">28</span> <span class="mi">29</span> <span class="mi">30</span> <span class="mi">31</span> <span class="mi">32</span> <span class="mi">33</span> <span class="mi">34</span> <span class="mi">35</span> <span class="mi">36</span> <span class="mi">37</span> <span class="mi">38</span> <span class="mi">39</span>
         <span class="mi">40</span> <span class="mi">41</span> <span class="mi">42</span> <span class="mi">43</span> <span class="mi">44</span> <span class="mi">45</span> <span class="mi">46</span> <span class="mi">47</span> <span class="mi">48</span> <span class="mi">49</span> <span class="mi">50</span> <span class="mi">51</span> <span class="mi">52</span> <span class="mi">53</span> <span class="mi">54</span> <span class="mi">55</span> <span class="mi">56</span> <span class="mi">57</span> <span class="mi">58</span> <span class="mi">59</span>
      <span class="n">size</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span> <span class="p">}</span>  <span class="c1">// assume uniform overall array dimensions</span>

   <span class="o">*</span> <span class="n">row</span> <span class="n">major</span> <span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="n">stride</span><span class="o">:</span>
      <span class="n">stride</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span> <span class="p">}</span>
      <span class="n">offset</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">}</span>
      <span class="k">for</span> <span class="n">i</span><span class="o">:</span>
         <span class="k">for</span> <span class="n">j</span><span class="o">:</span>
            <span class="k">for</span> <span class="n">k</span><span class="o">:</span>
               <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">k</span><span class="p">]</span><span class="o">:</span>
                  <span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span>
                  <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span>
                  <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span> <span class="mi">13</span> <span class="mi">14</span>
                  <span class="mi">15</span> <span class="mi">16</span> <span class="mi">17</span> <span class="mi">18</span> <span class="mi">19</span>

                  <span class="mi">20</span> <span class="mi">21</span> <span class="mi">22</span> <span class="mi">23</span> <span class="mi">24</span>
                  <span class="mi">25</span> <span class="mi">26</span> <span class="mi">27</span> <span class="mi">28</span> <span class="mi">29</span>
                  <span class="mi">30</span> <span class="mi">31</span> <span class="mi">32</span> <span class="mi">33</span> <span class="mi">34</span>
                  <span class="mi">35</span> <span class="mi">36</span> <span class="mi">37</span> <span class="mi">38</span> <span class="mi">39</span>

                  <span class="mi">40</span> <span class="mi">41</span> <span class="mi">42</span> <span class="mi">43</span> <span class="mi">44</span>
                  <span class="mi">45</span> <span class="mi">46</span> <span class="mi">47</span> <span class="mi">48</span> <span class="mi">49</span>
                  <span class="mi">50</span> <span class="mi">51</span> <span class="mi">52</span> <span class="mi">53</span> <span class="mi">54</span>
                  <span class="mi">55</span> <span class="mi">56</span> <span class="mi">57</span> <span class="mi">58</span> <span class="mi">59</span>

   <span class="o">*</span> <span class="n">column</span> <span class="n">major</span> <span class="p">(</span><span class="n">Fortran</span><span class="p">)</span> <span class="n">stride</span><span class="o">:</span>
      <span class="n">stride</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">12</span> <span class="p">}</span>
      <span class="n">offset</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">}</span>
      <span class="k">for</span> <span class="n">i</span><span class="o">:</span>
         <span class="k">for</span> <span class="n">j</span><span class="o">:</span>
            <span class="k">for</span> <span class="n">k</span><span class="o">:</span>
               <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="n">k</span><span class="p">]</span><span class="o">:</span>
                  <span class="mi">0</span> <span class="mi">12</span> <span class="mi">24</span> <span class="mi">36</span> <span class="mi">48</span>
                  <span class="mi">3</span> <span class="mi">15</span> <span class="mi">27</span> <span class="mi">39</span> <span class="mi">51</span>
                  <span class="mi">6</span> <span class="mi">18</span> <span class="mi">30</span> <span class="mi">42</span> <span class="mi">54</span>
                  <span class="mi">9</span> <span class="mi">21</span> <span class="mi">33</span> <span class="mi">45</span> <span class="mi">57</span>

                  <span class="mi">1</span> <span class="mi">13</span> <span class="mi">25</span> <span class="mi">37</span> <span class="mi">49</span>
                  <span class="mi">4</span> <span class="mi">16</span> <span class="mi">28</span> <span class="mi">40</span> <span class="mi">52</span>
                  <span class="mi">7</span> <span class="mi">19</span> <span class="mi">31</span> <span class="mi">43</span> <span class="mi">55</span>
                  <span class="mi">10</span> <span class="mi">22</span> <span class="mi">34</span> <span class="mi">46</span> <span class="mi">58</span>

                  <span class="mi">2</span> <span class="mi">14</span> <span class="mi">26</span> <span class="mi">38</span> <span class="mi">50</span>
                  <span class="mi">5</span> <span class="mi">17</span> <span class="mi">29</span> <span class="mi">41</span> <span class="mi">53</span>
                  <span class="mi">8</span> <span class="mi">20</span> <span class="mi">32</span> <span class="mi">44</span> <span class="mi">56</span>
                  <span class="mi">11</span> <span class="mi">23</span> <span class="mi">35</span> <span class="mi">47</span> <span class="mi">59</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
</div>
<div class="section" id="nexus-data-types">
<span id="design-datatypes"></span><h2>NeXus Data Types<a class="headerlink" href="#nexus-data-types" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">description</th>
<th class="head">matching regular expression</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>integer</td>
<td><tt class="docutils literal"><span class="pre">NX_INT(8|16|32|64)</span></tt></td>
</tr>
<tr class="row-odd"><td>floating-point</td>
<td><tt class="docutils literal"><span class="pre">NX_FLOAT(32|64)</span></tt></td>
</tr>
<tr class="row-even"><td>array</td>
<td><tt class="docutils literal"><span class="pre">(\\[0-9\\])?</span></tt></td>
</tr>
<tr class="row-odd"><td>valid item name</td>
<td><tt class="docutils literal"><span class="pre">^[A-Za-z_][A-Za-z0-9_]*$</span></tt></td>
</tr>
<tr class="row-even"><td>valid class name</td>
<td><tt class="docutils literal"><span class="pre">^NX[A-Za-z0-9_]*$</span></tt></td>
</tr>
</tbody>
</table>
<p>NeXus supports numeric data as either integer or floating-point
numbers.  A number follows that indicates the number of bits in the word.
The table above shows the regular expressions that
matches the data type specifier.</p>
<dl class="docutils" id="index-6">
<dt><strong>integers</strong></dt>
<dd><tt class="docutils literal"><span class="pre">NX_INT8</span></tt>,
<tt class="docutils literal"><span class="pre">NX_INT16</span></tt>,
<tt class="docutils literal"><span class="pre">NX_INT32</span></tt>,
or
<tt class="docutils literal"><span class="pre">NX_INT64</span></tt></dd>
</dl>
<dl class="docutils" id="index-7">
<dt><strong>floating-point numbers</strong></dt>
<dd><tt class="docutils literal"><span class="pre">NX_FLOAT32</span></tt>
or
<tt class="docutils literal"><span class="pre">NX_FLOAT64</span></tt></dd>
</dl>
<dl class="docutils" id="index-8">
<dt><strong>date / time stamps</strong></dt>
<dd><tt class="docutils literal"><span class="pre">NX_DATE_TIME</span></tt> or  <tt class="docutils literal"><span class="pre">ISO8601</span></tt>:
Dates and times are specified using
ISO-8601 standard definitions.
Refer to <a class="reference internal" href="#design-dates-times"><em>NeXus dates and times</em></a>.</dd>
</dl>
<dl class="docutils" id="index-9">
<dt><strong>strings</strong></dt>
<dd>All strings are to be encoded in UTF-8. Since most strings in a
NeXus file are restricted to a small set of characters and the first 128 characters are standard across encodings,
the encoding of most of the strings in a NeXus file will be a moot point.
Where encoding in UTF-8 will be important is when recording peoples names in <tt class="docutils literal"><span class="pre">NXuser</span></tt>
and text notes in <tt class="docutils literal"><span class="pre">NXnotes</span></tt>.
Because the few places where encoding is important also have unpredictable content, as well as the way in which
current operating systems handle character encoding, it is practically impossible to test the encoding used. Hence,
<tt class="docutils literal"><span class="pre">nxvalidate</span></tt> provides no messages relating to character encoding.</dd>
</dl>
<dl class="docutils" id="index-10">
<dt><strong>binary data</strong></dt>
<dd>Binary data is to be written as <tt class="docutils literal"><span class="pre">UINT8</span></tt>.</dd>
</dl>
<dl class="docutils" id="index-11">
<dt><strong>images</strong></dt>
<dd>Binary image data is to be written using <tt class="docutils literal"><span class="pre">UINT8</span></tt>, the same as binary data, but with an accompanying image mime-type.
If the data is text, the line terminator is <tt class="docutils literal"><span class="pre">[CR][LF]</span></tt>.</dd>
</dl>
<div class="section" id="nexus-dates-and-times">
<span id="design-dates-times"></span><h3>NeXus dates and times<a class="headerlink" href="#nexus-dates-and-times" title="Permalink to this headline">¶</a></h3>
<p id="index-12">NeXus  <span class="target" id="index-13"></span>dates and times
should be stored using the <a class="reference external" href="http://www.w3.org/TR/NOTE-datetime">ISO 8601</a> <a class="footnote-reference" href="#id4" id="id3">[2]</a>  format,
e.g. <tt class="docutils literal"><span class="pre">1996-07-31T21:15:22+0600</span></tt>.
The standard also allows for time intervals in fractional seconds
with <em>1 or more digits of precision</em>.
This avoids confusion, e.g. between U.S. and European conventions,
and is appropriate for machine sorting.</p>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[2]</a></td><td>ISO 8601: <a class="reference external" href="http://www.w3.org/TR/NOTE-datetime">http://www.w3.org/TR/NOTE-datetime</a></td></tr>
</tbody>
</table>
<div class="compound">
<p class="compound-first rubric">strftime() format specifiers for ISO-8601 time</p>
<div class="compound-last highlight-guess"><div class="highlight"><pre><span class="c">%Y-%m-%dT%H:%M:%S%z</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note that the <tt class="docutils literal"><span class="pre">T</span></tt> appears literally in the string,
to indicate the beginning of the time element, as specified
in ISO 8601.  It is common to use a space in place of the
<tt class="docutils literal"><span class="pre">T</span></tt>, such as <tt class="docutils literal"><span class="pre">1996-07-31</span> <span class="pre">21:15:22+0600</span></tt>.
While human-readable (and later allowed in a relaxed revision
of the standard), compatibility with libraries supporting
the ISO 8601 standard is not
assured with this substitution.  The <tt class="docutils literal"><span class="pre">strftime()</span></tt>
format specifier for this is &#8220;<tt class="docutils literal"><span class="pre">%Y-%m-%d</span> <span class="pre">%H:%M:%S%z</span></tt>&#8221;.</p>
</div>
</div>
</div>
<div class="section" id="nexus-data-units">
<span id="design-units"></span><span id="index-14"></span><h2>NeXus Data Units<a class="headerlink" href="#nexus-data-units" title="Permalink to this headline">¶</a></h2>
<p>Given the plethora of possible applications of NeXus, it is difficult to
define units to use. Therefore, the general rule is that you are free to
store data in any unit you find fit. However, any data field must have a
units attribute which describes the units, Wherever possible, SI units are
preferred. NeXus units are written as a string attribute (<tt class="docutils literal"><span class="pre">NX_CHAR</span></tt>)
and describe the engineering units. The string
should be appropriate for the value.
Values for the NeXus units must be specified in
a format compatible with <a class="reference external" href="http://www.unidata.ucar.edu/software/udunits/udunits-2.2.14/doc/udunits/udunits2.html#Database">Unidata UDunits</a> <a class="footnote-reference" href="#udunits" id="id5">[3]</a>
Application definitions may specify units to be used for fields
using <span class="target" id="index-15"></span>an <tt class="docutils literal"><span class="pre">enumeration</span></tt>.</p>
<table class="docutils footnote" frame="void" id="udunits" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[3]</a></td><td>The <span class="target" id="index-16"></span>UDunits
specification also includes instructions  for derived units.
At present, the contents of NeXus <tt class="docutils literal"><span class="pre">units</span></tt> attributes
are not validated in data files.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="linking-multi-dimensional-data-with-axis-data">
<span id="multi-dimensional-data"></span><span id="index-17"></span><h2>Linking Multi Dimensional Data with Axis Data<a class="headerlink" href="#linking-multi-dimensional-data-with-axis-data" title="Permalink to this headline">¶</a></h2>
<p>NeXus allows to store multi dimensional arrays of data.  In most cases
it is not sufficient to just have the indices into the array as a label for
the dimensions of the data. Usually the information which physical value
corresponds to an index into a dimension of the multi dimensional data set.
To this purpose a means is needed to locate appropriate data arrays which describe
what each dimension of a multi dimensional data set actually corresponds too.
There is a standard HDF facility to do this: it is called
<span class="target" id="index-18"></span>dimension scales.
Unfortunately, at a time, there was only one global namespace for dimension scales.
Thus NeXus had to come up with its own scheme for locating axis data which is described
here. A side effect of the NeXus scheme is that it is possible to have multiple
mappings of a given dimension to physical data. For example a TOF data set can have the TOF
dimension as raw TOF or as energy.</p>
<p>There are two methods of
<span class="target" id="index-19"></span>linking
each data dimension to its respective dimension scale.
The preferred method uses the <tt class="docutils literal"><span class="pre">axes</span></tt> attribute
to specify the names of each
<span class="target" id="index-20"></span>dimension scale.
The original method uses the <tt class="docutils literal"><span class="pre">axis</span></tt> attribute to identify
with an integer the axis whose value is the number of the dimension.
After describing each of these methods, the two methods will be compared.
A prerequisite for both methods is that the data fields describing the axis
are stored together with the multi dimensional data set whose axes need to be defined
in the same NeXus group. If this leads to data duplication, use links.</p>
<div class="section" id="linking-by-name-using-the-axes-attribute">
<span id="design-linking-byname"></span><h3>Linking by name using the <tt class="docutils literal"><span class="pre">axes</span></tt> attribute<a class="headerlink" href="#linking-by-name-using-the-axes-attribute" title="Permalink to this headline">¶</a></h3>
<p>The preferred method is to define an attribute of the data itself
<span class="target" id="index-21"></span>called <em>axes</em>.
The <tt class="docutils literal"><span class="pre">axes</span></tt> attribute contains the names of
each <span class="target" id="index-22"></span>dimension scale
as a colon (or comma) separated list in the order they appear in C.
For example:</p>
<div class="compound">
<p class="compound-first rubric">Preferred way of denoting axes</p>
<div class="compound-last highlight-guess"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre>  <span class="nl">data:</span><span class="n">NXdata</span>
    <span class="n">time_of_flight</span> <span class="o">=</span> <span class="mf">1500.0</span> <span class="mf">1502.0</span> <span class="mf">1504.0</span> <span class="p">...</span>
    <span class="n">polar_angle</span> <span class="o">=</span> <span class="mf">15.0</span> <span class="mf">15.6</span> <span class="mf">16.2</span> <span class="p">...</span>
    <span class="n">some_other_angle</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="mf">0.0</span> <span class="mf">2.0</span> <span class="p">...</span>
    <span class="n">data</span> <span class="o">=</span> <span class="mi">5</span> <span class="mi">7</span> <span class="mi">14</span> <span class="p">...</span>
      <span class="err">@</span><span class="n">axes</span> <span class="o">=</span> <span class="n">polar_angle</span><span class="o">:</span><span class="n">time_of_flight</span>
      <span class="err">@</span><span class="n">signal</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="linking-by-dimension-number-using-the-axis-attribute">
<span id="design-linkingbydimnumber"></span><h3>Linking by dimension number using the <tt class="docutils literal"><span class="pre">axis</span></tt> attribute<a class="headerlink" href="#linking-by-dimension-number-using-the-axis-attribute" title="Permalink to this headline">¶</a></h3>
<p>The original method is to define an attribute of each dimension
scale <span class="target" id="index-23"></span>called <em>axis</em>.
It is an integer whose value is the number of
the dimension, in order of
<span class="target" id="index-24"></span>fastest varying dimension.
That is, if the array being stored is data with elements
<tt class="docutils literal"><span class="pre">data[j][i]</span></tt> in C and
<tt class="docutils literal"><span class="pre">data(i,j)</span></tt> in Fortran, where <tt class="docutils literal"><span class="pre">i</span></tt> is the
time-of-flight index and <tt class="docutils literal"><span class="pre">j</span></tt> is
the polar angle index, the <tt class="docutils literal"><span class="pre">NXdata</span></tt>  <span class="target" id="index-25"></span>group
would contain:</p>
<div class="compound">
<p class="compound-first rubric">Original way of denoting axes</p>
<div class="compound-last highlight-guess"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre>  <span class="nl">data:</span><span class="n">NXdata</span>
    <span class="n">time_of_flight</span> <span class="o">=</span> <span class="mf">1500.0</span> <span class="mf">1502.0</span> <span class="mf">1504.0</span> <span class="p">...</span>
      <span class="err">@</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span>
      <span class="err">@</span><span class="n">primary</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">polar_angle</span> <span class="o">=</span> <span class="mf">15.0</span> <span class="mf">15.6</span> <span class="mf">16.2</span> <span class="p">...</span>
      <span class="err">@</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">2</span>
      <span class="err">@</span><span class="n">primary</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">some_other_angle</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="mf">0.0</span> <span class="mf">2.0</span> <span class="p">...</span>
      <span class="err">@</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">data</span> <span class="o">=</span> <span class="mi">5</span> <span class="mi">7</span> <span class="mi">14</span> <span class="p">...</span>
      <span class="err">@</span><span class="n">signal</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</td></tr></table></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">axis</span></tt> attribute must
be defined for each dimension scale.
The <tt class="docutils literal"><span class="pre">primary</span></tt> attribute is unique to this method of linking.</p>
<p>There are limited circumstances in which more
than one <span class="target" id="index-26"></span>dimension scale
for the same data dimension can be included in the same
<tt class="docutils literal"><span class="pre">NXdata</span></tt> <span class="target" id="index-27"></span>group.
The most common is when the dimension scales are
the three components of an
<em>(hkl)</em> scan. In order to
handle this case, we have defined another attribute
of type integer called
<tt class="docutils literal"><span class="pre">primary</span></tt> whose value determines the order
in which the scale is expected to be chosen for <span class="target" id="index-28"></span>plotting, i.e.</p>
<ul class="simple">
<li>1st choice: <tt class="docutils literal"><span class="pre">primary=1</span></tt></li>
<li>2nd choice: <tt class="docutils literal"><span class="pre">primary=2</span></tt></li>
<li>etc.</li>
</ul>
<p>If there is more than one scale with the same value of the <tt class="docutils literal"><span class="pre">axis</span></tt> attribute, one
of them must have set <tt class="docutils literal"><span class="pre">primary=1</span></tt>. Defining the <tt class="docutils literal"><span class="pre">primary</span></tt>
attribute for the other scales is optional.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">primary</span></tt> attribute can only be
used with the first method of defining  <span class="target" id="index-29"></span>dimension scales
discussed above. In addition to
the <tt class="docutils literal"><span class="pre">signal</span></tt> data, this
group could contain a data set of the same  <span class="target" id="index-30"></span>rank
and dimensions called <tt class="docutils literal"><span class="pre">errors</span></tt>
containing the standard deviations of the data.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="discussion-of-the-two-linking-methods">
<span id="design-linking-discussion"></span><h3>Discussion of the two linking methods<a class="headerlink" href="#discussion-of-the-two-linking-methods" title="Permalink to this headline">¶</a></h3>
<p>In general the method using the <tt class="docutils literal"><span class="pre">axes</span></tt> attribute on the multi dimensional
data set should be preferred. This leaves the actual axis describing data sets
unannotated and allows them to be used as an axis for other multi dimensional
data.  This is especially a concern as an axis describing a data set may be linked
into another group where it may describe a
<span class="target" id="index-31"></span>completely different dimension
of another data set.</p>
<p>Only when alternative axes definitions are needed, the <tt class="docutils literal"><span class="pre">axis</span></tt> method
should be used to specify an axis of a data set.  This is shown in the example above for
the <tt class="docutils literal"><span class="pre">some_other_angle</span></tt> field where <tt class="docutils literal"><span class="pre">axis=1</span></tt>
denotes another possible primary axis for plotting.  The default
axis for plotting carries the <tt class="docutils literal"><span class="pre">primary=1</span></tt> attribute.</p>
<p>Both methods of linking data axes will be supported in NeXus
utilities that identify
<span class="target" id="index-32"></span>dimension scales,
such as <tt class="docutils literal"><span class="pre">NXUfindaxis()</span></tt>.</p>
</div>
</div>
<div class="section" id="storing-detectors">
<span id="rules-storingdetectors"></span><h2>Storing Detectors<a class="headerlink" href="#storing-detectors" title="Permalink to this headline">¶</a></h2>
<p>There are very different types of detectors out there. Storing their data
can be a challenge. As a general guide line: if the detector has some
well defined form, this should be reflected in the data file. A linear
detector becomes a linear array, a rectangular detector becomes an
array of size <tt class="docutils literal"><span class="pre">xsize</span></tt> times <tt class="docutils literal"><span class="pre">ysize</span></tt>.
Some detectors are so irregular that this
does not work. Then the detector data is stored as a linear array, with the
index being detector number till <tt class="docutils literal"><span class="pre">ndet</span></tt>. Such detectors must be accompanied
by further arrays of length <tt class="docutils literal"><span class="pre">ndet</span></tt> which give
<tt class="docutils literal"><span class="pre">azimuthal_angle,</span> <span class="pre">polar_angle</span> <span class="pre">and</span> <span class="pre">distance</span></tt> for each detector.</p>
<p>If data from a time of flight (TOF) instrument must be described, then the
TOF dimension becomes the last dimension, for example an area detector of
<tt class="docutils literal"><span class="pre">xsize</span></tt> <em>vs.</em> <tt class="docutils literal"><span class="pre">ysize</span></tt>
is stored with TOF as an array with dimensions
<tt class="docutils literal"><span class="pre">xsize,</span> <span class="pre">ysize,</span>
<span class="pre">ntof</span></tt>.</p>
</div>
<div class="section" id="monitors-are-special">
<span id="rules-storingdata-monitors"></span><h2>Monitors are Special<a class="headerlink" href="#monitors-are-special" title="Permalink to this headline">¶</a></h2>
<p><span class="target" id="index-33"></span>Monitors, detectors that measure the properties
of the experimental probe rather than the
sample, have a special place in NeXus files. Monitors are crucial to normalize data.
To emphasize their role, monitors are not stored in the
<tt class="docutils literal"><span class="pre">NXinstrument</span></tt> hierarchy but on <tt class="docutils literal"><span class="pre">NXentry</span></tt> level
in their own groups as there might be multiple monitors. Of special
importance is the monitor in a group called <tt class="docutils literal"><span class="pre">control</span></tt>.
This is the main monitor against which the data has to be normalized.
This group also contains the counting control information,
i.e. counting mode, times, etc.</p>
<p>Monitor data may be multidimensional. Good examples are scan monitors
where a monitor value per scan point is expected or
time-of-flight monitors.</p>
</div>
<div class="section" id="find-the-plottable-data">
<span id="find-plottable-data"></span><span id="index-34"></span><h2>Find the plottable data<a class="headerlink" href="#find-the-plottable-data" title="Permalink to this headline">¶</a></h2>
<p>Any program whose aim is to identify the default plottable data
should use the following procedure:</p>
<ol class="arabic">
<li><p class="first">Start at the top level of the NeXus data file.</p>
</li>
<li><p class="first">Loop through the groups with class <tt class="docutils literal"><span class="pre">NXentry</span></tt>
until the next step succeeds.</p>
</li>
<li><p class="first">Open the NXentry group and loop through the subgroups
with class <tt class="docutils literal"><span class="pre">NXdata</span></tt> until the next step succeeds.</p>
</li>
<li><p class="first">Open the NXdata group and loop through the fields for the one field
with attribute <tt class="docutils literal"><span class="pre">signal=&quot;1&quot;</span></tt>.
Note: There should be <em>only one</em> field that matches.</p>
<p>This is the default plottable data.</p>
<ol class="arabic simple">
<li>If this field has an attribute <tt class="docutils literal"><span class="pre">axes</span></tt>:<ol class="arabic">
<li>The <tt class="docutils literal"><span class="pre">axes</span></tt> attribute value contains a colon (or comma)
delimited list (in the C-order of the data array) with
the names of the
<span class="target" id="index-35"></span>dimension scales
associated with the plottable data.
Such as:  <tt class="docutils literal"><span class="pre">axes=&quot;polar_angle:time_of_flight&quot;</span></tt></li>
<li>Parse <tt class="docutils literal"><span class="pre">axes</span></tt> and open the datasets to describe your
<span class="target" id="index-36"></span>dimension scales</li>
</ol>
</li>
<li>If this field has no attribute <tt class="docutils literal"><span class="pre">axes</span></tt>:<ol class="arabic">
<li>Search for datasets with attributes <tt class="docutils literal"><span class="pre">axis=1</span></tt>, <tt class="docutils literal"><span class="pre">axis=2</span></tt>, etc.</li>
<li>These are the fields describing your axis. There may be
several fields for any axis, i.e. there may be multiple
fields with the attribute <tt class="docutils literal"><span class="pre">axis=1</span></tt>. Among them the
field with the attribute <tt class="docutils literal"><span class="pre">primary=1</span></tt> is the preferred one.
All others are alternative <span class="target" id="index-37"></span>dimension scales.</li>
</ol>
</li>
</ol>
</li>
<li><p class="first">Having found the default plottable data and its dimension scales:
make the plot.</p>
</li>
</ol>
<p>Consult the <a class="reference internal" href="introduction-napi.html#introduction-napi"><em>NeXus API</em></a>
section, which describes the routines available to program these
operations. In the course of time, generic NeXus browsers will
provide this functionality automatically.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="fileformat.html" title="1.2.3.3. Physical File format"
             >next</a> |</li>
        <li class="right" >
          <a href="rules.html" title="1.2.3.1. Rules for Structuring Information in NeXus Files"
             >previous</a> |</li>
        <li><a href="index.html">NeXus: Manual 3.1 documentation</a> &raquo;</li>
          <li><a href="user_manual.html" >1. NeXus: User Manual</a> &raquo;</li>
          <li><a href="design.html" >1.2. NeXus Design</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; <a href="copyright.html">Copyright</a> 2014, http://nexusformat.org.
      Last updated on 2014-10-02 14:43:08 CDT.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>