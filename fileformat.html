

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1.2.3.3. Physical File format &mdash; NeXus: Manual 3.1 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '3.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="copyright.html" />
    <link rel="top" title="NeXus: Manual 3.1 documentation" href="index.html" />
    <link rel="up" title="1.2. NeXus Design" href="design.html" />
    <link rel="next" title="1.3. Constructing NeXus Files and Application Definitions" href="applying-nexus.html" />
    <link rel="prev" title="1.2.3.2. Rules for Storing Data Items in NeXus Files" href="datarules.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="applying-nexus.html" title="1.3. Constructing NeXus Files and Application Definitions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="datarules.html" title="1.2.3.2. Rules for Storing Data Items in NeXus Files"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">NeXus: Manual 3.1 documentation</a> &raquo;</li>
          <li><a href="user_manual.html" >1. NeXus: User Manual</a> &raquo;</li>
          <li><a href="design.html" accesskey="U">1.2. NeXus Design</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/nexuslogo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1.2.3.3. Physical File format</a><ul>
<li><a class="reference internal" href="#choice-of-hdf-as-underlying-file-format">Choice of HDF as Underlying File Format</a></li>
<li><a class="reference internal" href="#mapping-nexus-into-hdf">Mapping NeXus into HDF</a></li>
<li><a class="reference internal" href="#mapping-nexus-into-xml">Mapping NeXus into XML</a></li>
<li><a class="reference internal" href="#special-attributes">Special Attributes</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="datarules.html"
                        title="previous chapter">1.2.3.2. Rules for Storing Data Items in NeXus Files</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="applying-nexus.html"
                        title="next chapter">1.3. Constructing NeXus Files and Application Definitions</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/fileformat.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="physical-file-format">
<span id="fileformat"></span><span id="index-0"></span><h1>1.2.3.3. Physical File format<a class="headerlink" href="#physical-file-format" title="Permalink to this headline">¶</a></h1>
<p>This section describes how NeXus structures are mapped to features of the underlying
physical file format.
This is a guide for people who wish to create NeXus files without
using the NeXus-API.</p>
<span class="target" id="fileformat-hdf-choice"></span><div class="section" id="choice-of-hdf-as-underlying-file-format">
<span id="index-1"></span><h2>Choice of HDF as Underlying File Format<a class="headerlink" href="#choice-of-hdf-as-underlying-file-format" title="Permalink to this headline">¶</a></h2>
<p>At its beginnings, the founders of NeXus identified the
Hierarchical Data Format (HDF) as a capable and efficient multi-platform
data storage format. HDF was designed for large data sets and already
had a substantial user community. HDF was developed and maintained
initially by the National Center for Supercomputing Applications (NCSA)
at the University of Illinois at Urbana-Champaign (UIUC) and later spun
off into its own group called The HDF Group (THG: <a class="reference external" href="http://www.hdfgroup.org/">http://www.hdfgroup.org/</a>).
Rather then developing its own unique physical file format, the NeXus group
choose to build NeXus on top of HDF.</p>
<p>HDF (now HDF5) is provided with
software to read and write data (this is the application-programmer interface, or API)
using a large number of computing systems in common use for neutron and
X-ray science. HDF is a binary data file format that supports compression and structured
data.</p>
</div>
<div class="section" id="mapping-nexus-into-hdf">
<span id="fileformat-mapping-hdf"></span><h2>Mapping NeXus into HDF<a class="headerlink" href="#mapping-nexus-into-hdf" title="Permalink to this headline">¶</a></h2>
<p>NeXus data structures map directly to HDF structures.
NeXus <em>groups</em> are HDF4 <em>vgroups</em> or HDF5 <em>groups</em>,
NeXus data sets (or <em>fields</em>) are HDF4 <em>SDS (scientific data sets)</em>
or HDF5 <em>datasets</em>.  Attributes map directly to HDF group or dataset
<span class="target" id="index-2"></span>attributes.</p>
<p>The only special case is the NeXus class name. HDF4 supports a group class
which is set with the <tt class="docutils literal"><span class="pre">Vsetclass()</span></tt> call
and read with <tt class="docutils literal"><span class="pre">VGetclass()</span></tt>.
HDF-5 has no group class. Thus the NeXus class
is stored as an attribute to the HDF-5 group with the name <tt class="docutils literal"><span class="pre">NX_class</span></tt>
and value of the NeXus class name.</p>
<p>A NeXus <tt class="docutils literal"><span class="pre">link</span></tt> directly maps to the HDF linking mechanisms.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Examples</strong> are provided in the <a class="reference internal" href="examples/index.html#examples"><em>Examples of writing and reading NeXus data files</em></a> chapter.
These examples include software to write and read NeXus data files using the NAPI, as
well as other software examples that use native (non-NAPI) libraries.  In some cases the
examples show the content of the NeXus data files that are produced.
Here are links to some of the examples:</p>
<ul class="last simple">
<li><a class="reference internal" href="introduction-napi.html#introduction-howtowrite"><em>How do I write a NeXus file?</em></a></li>
<li><a class="reference internal" href="introduction-napi.html#introduction-howtoread"><em>How do I read a NeXus file?</em></a></li>
<li><a class="reference internal" href="examples/code_napi.html#example-napi-simple-2d-write"><em>NAPI Simple 2-D Write Example (C, F77, F90)</em></a></li>
<li><a class="reference internal" href="examples/code_native.html#code-native-writing"><em>Writing a simple NeXus file using native HDF5 commands in C</em></a></li>
<li><a class="reference internal" href="examples/code_native.html#code-native-reading"><em>Reading a simple NeXus file using native HDF5 commands in C</em></a></li>
<li><a class="reference internal" href="examples/h5py/index.html#example-h5py-writing"><em>Writing the HDF5 file using h5py</em></a></li>
<li><a class="reference internal" href="examples/h5py/index.html#example-h5py-reading"><em>Reading the HDF5 file using h5py</em></a></li>
</ul>
</div>
<p>Perhaps the easiest way to view the implementation of NeXus in HDF5 is to view
how the data structures look.  For this, we use the <tt class="docutils literal"><span class="pre">h5dump</span></tt> command-line
utility provided with the HDF5 support libraries.  Short examples are provided for the
basic NeXus data components:</p>
<ul>
<li><p class="first"><a class="reference internal" href="#h5dump-group"><em>group</em></a>:
created in C NAPI by:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">NXmakegroup</span> <span class="p">(</span><span class="n">fileID</span><span class="p">,</span> <span class="s">&quot;entry&quot;</span><span class="p">,</span> <span class="s">&quot;NXentry&quot;</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p class="first"><a class="reference internal" href="#h5dump-field"><em>field</em></a>:
created in C NAPI by:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">NXmakedata</span> <span class="p">(</span><span class="n">fileID</span><span class="p">,</span> <span class="s">&quot;two_theta&quot;</span><span class="p">,</span> <span class="n">NX_FLOAT32</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">n</span><span class="p">);</span>
  <span class="n">NXopendata</span> <span class="p">(</span><span class="n">fileID</span><span class="p">,</span> <span class="s">&quot;two_theta&quot;</span><span class="p">);</span>
<span class="n">NXputdata</span> <span class="p">(</span><span class="n">fileID</span><span class="p">,</span> <span class="n">tth</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p class="first"><a class="reference internal" href="#h5dump-attribute"><em>attribute</em></a>:
created in C NAPI by:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">NXputattr</span> <span class="p">(</span><span class="n">fileID</span><span class="p">,</span> <span class="s">&quot;units&quot;</span><span class="p">,</span> <span class="s">&quot;degrees&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">NX_CHAR</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p class="first"><a class="reference internal" href="#h5dump-link"><em>link</em></a>
created in C NAPI by:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp"># --tba--</span>
<span class="cp"># TODO: write some text about HDF5 hard links</span>
<span class="cp"># until then, see the h5dump example below</span>
</pre></div>
</div>
</li>
</ul>
<p>See the sections <a class="reference internal" href="examples/code_napi.html#example-napi-simple-2d-write"><em>NAPI Simple 2-D Write Example (C, F77, F90)</em></a>
and  <a class="reference internal" href="examples/code_napi.html#example-napi-simple-3d-write-python"><em>NAPI Python Simple 3-D Write Example</em></a> in the <a class="reference internal" href="examples/index.html#examples"><em>Examples of writing and reading NeXus data files</em></a>
chapter for examples that use the native HDF5 calls to write NeXus data files.</p>
<div class="compound">
<p class="compound-first rubric"><tt class="docutils literal"><span class="pre">h5dump</span></tt> of a NeXus <tt class="docutils literal"><span class="pre">NXentry</span></tt> group</p>
<div class="compound-last highlight-guess" id="h5dump-group"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">GROUP</span> <span class="s">&quot;entry&quot;</span> <span class="p">{</span>
  <span class="n">ATTRIBUTE</span> <span class="s">&quot;NX_class&quot;</span> <span class="p">{</span>
     <span class="n">DATATYPE</span>  <span class="n">H5T_STRING</span> <span class="p">{</span>
           <span class="n">STRSIZE</span> <span class="mi">7</span><span class="p">;</span>
           <span class="n">STRPAD</span> <span class="n">H5T_STR_NULLPAD</span><span class="p">;</span>
           <span class="n">CSET</span> <span class="n">H5T_CSET_ASCII</span><span class="p">;</span>
           <span class="n">CTYPE</span> <span class="n">H5T_C_S1</span><span class="p">;</span>
        <span class="p">}</span>
     <span class="n">DATASPACE</span>  <span class="n">SCALAR</span>
     <span class="n">DATA</span> <span class="p">{</span>
     <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">:</span> <span class="s">&quot;NXentry&quot;</span>
     <span class="p">}</span>
  <span class="p">}</span>
  <span class="err">#</span> <span class="p">...</span> <span class="n">group</span> <span class="n">contents</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="compound">
<p class="compound-first rubric"><tt class="docutils literal"><span class="pre">h5dump</span></tt> of a NeXus field (HDF5 dataset)</p>
<div class="compound-last highlight-guess" id="h5dump-field"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre> <span class="n">DATASET</span> <span class="s">&quot;two_theta&quot;</span> <span class="p">{</span>
    <span class="n">DATATYPE</span>  <span class="n">H5T_IEEE_F64LE</span>
    <span class="n">DATASPACE</span>  <span class="n">SIMPLE</span> <span class="p">{</span> <span class="p">(</span> <span class="mi">31</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="mi">31</span> <span class="p">)</span> <span class="p">}</span>
    <span class="n">DATA</span> <span class="p">{</span>
    <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">:</span> <span class="mf">17.9261</span><span class="p">,</span> <span class="mf">17.9259</span><span class="p">,</span> <span class="mf">17.9258</span><span class="p">,</span> <span class="mf">17.9256</span><span class="p">,</span> <span class="mf">17.9254</span><span class="p">,</span> <span class="mf">17.9252</span><span class="p">,</span>
    <span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">:</span> <span class="mf">17.9251</span><span class="p">,</span> <span class="mf">17.9249</span><span class="p">,</span> <span class="mf">17.9247</span><span class="p">,</span> <span class="mf">17.9246</span><span class="p">,</span> <span class="mf">17.9244</span><span class="p">,</span> <span class="mf">17.9243</span><span class="p">,</span>
    <span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">:</span> <span class="mf">17.9241</span><span class="p">,</span> <span class="mf">17.9239</span><span class="p">,</span> <span class="mf">17.9237</span><span class="p">,</span> <span class="mf">17.9236</span><span class="p">,</span> <span class="mf">17.9234</span><span class="p">,</span> <span class="mf">17.9232</span><span class="p">,</span>
    <span class="p">(</span><span class="mi">18</span><span class="p">)</span><span class="o">:</span> <span class="mf">17.9231</span><span class="p">,</span> <span class="mf">17.9229</span><span class="p">,</span> <span class="mf">17.9228</span><span class="p">,</span> <span class="mf">17.9226</span><span class="p">,</span> <span class="mf">17.9224</span><span class="p">,</span> <span class="mf">17.9222</span><span class="p">,</span>
    <span class="p">(</span><span class="mi">24</span><span class="p">)</span><span class="o">:</span> <span class="mf">17.9221</span><span class="p">,</span> <span class="mf">17.9219</span><span class="p">,</span> <span class="mf">17.9217</span><span class="p">,</span> <span class="mf">17.9216</span><span class="p">,</span> <span class="mf">17.9214</span><span class="p">,</span> <span class="mf">17.9213</span><span class="p">,</span>
    <span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="o">:</span> <span class="mf">17.9211</span>
    <span class="p">}</span>
    <span class="n">ATTRIBUTE</span> <span class="s">&quot;units&quot;</span> <span class="p">{</span>
       <span class="n">DATATYPE</span>  <span class="n">H5T_STRING</span> <span class="p">{</span>
             <span class="n">STRSIZE</span> <span class="mi">7</span><span class="p">;</span>
             <span class="n">STRPAD</span> <span class="n">H5T_STR_NULLPAD</span><span class="p">;</span>
             <span class="n">CSET</span> <span class="n">H5T_CSET_ASCII</span><span class="p">;</span>
             <span class="n">CTYPE</span> <span class="n">H5T_C_S1</span><span class="p">;</span>
          <span class="p">}</span>
       <span class="n">DATASPACE</span>  <span class="n">SCALAR</span>
       <span class="n">DATA</span> <span class="p">{</span>
       <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">:</span> <span class="s">&quot;degrees&quot;</span>
       <span class="p">}</span>
    <span class="p">}</span>
    <span class="err">#</span> <span class="p">...</span> <span class="n">other</span> <span class="n">attributes</span>
 <span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="compound">
<p class="compound-first rubric"><tt class="docutils literal"><span class="pre">h5dump</span></tt> of a NeXus attribute</p>
<div class="compound-last highlight-guess" id="h5dump-attribute"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">ATTRIBUTE</span> <span class="s">&quot;axes&quot;</span> <span class="p">{</span>
   <span class="n">DATATYPE</span>  <span class="n">H5T_STRING</span> <span class="p">{</span>
         <span class="n">STRSIZE</span> <span class="mi">9</span><span class="p">;</span>
         <span class="n">STRPAD</span> <span class="n">H5T_STR_NULLPAD</span><span class="p">;</span>
         <span class="n">CSET</span> <span class="n">H5T_CSET_ASCII</span><span class="p">;</span>
         <span class="n">CTYPE</span> <span class="n">H5T_C_S1</span><span class="p">;</span>
      <span class="p">}</span>
   <span class="n">DATASPACE</span>  <span class="n">SCALAR</span>
   <span class="n">DATA</span> <span class="p">{</span>
   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">:</span> <span class="s">&quot;two_theta&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="compound">
<p class="compound-first rubric"><tt class="docutils literal"><span class="pre">h5dump</span></tt> of a NeXus link</p>
<div class="compound-last highlight-guess" id="h5dump-link"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp"># NeXus links have two parts in HDF5 files.</span>

<span class="cp"># The dataset is created in some group.</span>
<span class="cp"># A &quot;target&quot; attribute is added to indicate the HDF5 path to this dataset.</span>

<span class="n">ATTRIBUTE</span> <span class="s">&quot;target&quot;</span> <span class="p">{</span>
   <span class="n">DATATYPE</span>  <span class="n">H5T_STRING</span> <span class="p">{</span>
         <span class="n">STRSIZE</span> <span class="mi">21</span><span class="p">;</span>
         <span class="n">STRPAD</span> <span class="n">H5T_STR_NULLPAD</span><span class="p">;</span>
         <span class="n">CSET</span> <span class="n">H5T_CSET_ASCII</span><span class="p">;</span>
         <span class="n">CTYPE</span> <span class="n">H5T_C_S1</span><span class="p">;</span>
      <span class="p">}</span>
   <span class="n">DATASPACE</span>  <span class="n">SCALAR</span>
   <span class="n">DATA</span> <span class="p">{</span>
   <span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">:</span> <span class="s">&quot;/entry/data/two_theta&quot;</span>
   <span class="p">}</span>
<span class="p">}</span>

<span class="cp"># then, the hard link is created that refers to the original dataset</span>
<span class="cp"># (Since the name is &quot;two_theta&quot; in this example, it is understood that</span>
<span class="cp"># this link is created in a different HDF5 group than &quot;/entry/data&quot;.)</span>

<span class="n">DATASET</span> <span class="s">&quot;two_theta&quot;</span> <span class="p">{</span>
   <span class="n">HARDLINK</span> <span class="s">&quot;/entry/data/two_theta&quot;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="mapping-nexus-into-xml">
<span id="fileformat-mapping-xml"></span><h2>Mapping NeXus into XML<a class="headerlink" href="#mapping-nexus-into-xml" title="Permalink to this headline">¶</a></h2>
<p id="index-3">This takes a bit more work than HDF.
At the root of NeXus XML file
is a XML element with the name <tt class="docutils literal"><span class="pre">NXroot</span></tt>.
Further XML attributes to
<tt class="docutils literal"><span class="pre">NXroot</span></tt> define the NeXus file level attributes.
An example NeXus XML data file is provided in the
<a class="reference internal" href="introduction.html#introduction"><em>NeXus Introduction</em></a> chapter as
Example <em class="xref std std-ref">A very simple NeXus Data file (in XML)</em>.</p>
<p>NeXus groups are encoded into XML as elements with the
name of the NeXus class and an XML attribute <tt class="docutils literal"><span class="pre">name</span></tt> which defines the
NeXus name of the group. Further group attributes become XML attributes. An example:</p>
<div class="compound">
<p class="compound-first rubric">NeXus group element in XML</p>
<div class="compound-last highlight-guess"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre>    <span class="nt">&lt;NXentry</span> <span class="na">name=</span><span class="s">&quot;entry&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/NXentry&gt;</span>
</pre></div>
</td></tr></table></div>
</div>
<p>NeXus data sets are encoded as XML elements with
the name of the data. An attribute <tt class="docutils literal"><span class="pre">NAPItype</span></tt> defines the type and
<span class="target" id="index-4"></span>dimensions
of the data. The actual data is
stored as <tt class="docutils literal"><span class="pre">PCDATA</span></tt> <a class="footnote-reference" href="#pcdata" id="id1">[1]</a> in the element. Another example:</p>
<table class="docutils footnote" frame="void" id="pcdata" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><tt class="docutils literal"><span class="pre">PCDATA</span></tt> is the XML term for
<em>parsed character data</em> (see: <a class="reference external" href="http://www.w3schools.com/xml/xml_cdata.asp">http://www.w3schools.com/xml/xml_cdata.asp</a>).</td></tr>
</tbody>
</table>
<div class="compound">
<p class="compound-first rubric">NeXus data elements</p>
<div class="compound-last highlight-guess"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre>    <span class="nt">&lt;mode</span> <span class="na">NAPItype=</span><span class="s">&quot;NX_CHAR</span><span class="cp">[</span><span class="mi">7</span><span class="cp">]</span><span class="s">&quot;</span><span class="nt">&gt;</span>
        monitor
    <span class="nt">&lt;/mode&gt;</span>
    <span class="nt">&lt;counts</span> <span class="na">NAPItype=</span><span class="s">&quot;NX_INT32</span><span class="cp">[</span><span class="mi">4</span><span class="cp">]</span><span class="s">&quot;</span><span class="nt">&gt;</span>
        21 456  127876 319
    <span class="nt">&lt;/counts&gt;</span>
</pre></div>
</td></tr></table></div>
</div>
<p id="index-5">Data are printed in appropriate formats and in C storage order.
The codes understood for <tt class="docutils literal"><span class="pre">NAPItype</span></tt> are
all the NeXus data type names. The
<span class="target" id="index-6"></span>dimensions
are given in square brackets as a comma
separated list. No dimensions need to be given if
the data is just a single value.
Data attributes are represented as XML attributes.
If the attribute is not a text string, then the
attribute is given in the form: <em>type:value</em>, for example:
<tt class="docutils literal"><span class="pre">signal=&quot;NX_POSINT:1&quot;</span></tt>.</p>
<p><span class="target" id="index-7"></span>NeXus links are stored in XML as XML elements
with the <span class="target" id="index-8"></span>name  <tt class="docutils literal"><span class="pre">NAPIlink</span></tt>
and a XML attribute <tt class="docutils literal"><span class="pre">target</span></tt> which stores the path to the linked
entity in the file.  If the item is linked under
a different name, then this name is specified as a XML attribute name to
the element <tt class="docutils literal"><span class="pre">NAPIlink</span></tt>.</p>
<p>The authors of the NeXus API worked with the author of the miniXML XML library to
create a reasonably efficient way of handling numeric data with XML. Using the NeXus API handling
something like 400 detectors versus 2000 time channels in XML is not a problem. But you may
hit limits with XML as the file format when data becomes to large or you try to process NeXus
XML files with general XML tools. General XML tools are normally ill prepared to process large
amounts of numbers.</p>
</div>
<div class="section" id="special-attributes">
<span id="fileformat-specialattributes"></span><h2>Special Attributes<a class="headerlink" href="#special-attributes" title="Permalink to this headline">¶</a></h2>
<p id="index-9">NeXus makes use of some special attributes for its internal purposes.
These attributes are stored as normal group or data set attributes
in the respective file format. These are:</p>
<dl class="docutils" id="index-10">
<dt><strong>target</strong></dt>
<dd>This attribute is automatically created when items get linked.
The target attribute contains a text string with
the path to the source of the item linked.</dd>
</dl>
<dl class="docutils" id="index-11">
<dt><strong>napimount</strong></dt>
<dd><p class="first">The <tt class="docutils literal"><span class="pre">napimount</span></tt> attribute is used to implement
external linking in NeXus.
The string is a URL to the file and group in the
external file to link too. The system is meant to be extended.
But as of now, the only format supported is:</p>
<div class="highlight-text"><div class="highlight"><pre>nxfile://path-to-file#path-infile
</pre></div>
</div>
<p class="last">This is a NeXus file in the file system at <em>path-to-file</em>
and the group <em>path-infile</em> in that NeXus file.</p>
</dd>
</dl>
<dl class="docutils" id="index-12">
<dt><strong>NAPIlink</strong></dt>
<dd>NeXus supports linking items in another group under another name.
This is only supported natively in HDF-5.
For HDF-4 and XML a crutch is needed.
This crutch is a special class name or attribute
<tt class="docutils literal"><span class="pre">NAPIlink</span></tt> combined with the
target attribute. For groups, <tt class="docutils literal"><span class="pre">NAPILink</span></tt>
is the group class, for data items a special attribute
with the name <tt class="docutils literal"><span class="pre">NAPIlink</span></tt>.</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="applying-nexus.html" title="1.3. Constructing NeXus Files and Application Definitions"
             >next</a> |</li>
        <li class="right" >
          <a href="datarules.html" title="1.2.3.2. Rules for Storing Data Items in NeXus Files"
             >previous</a> |</li>
        <li><a href="index.html">NeXus: Manual 3.1 documentation</a> &raquo;</li>
          <li><a href="user_manual.html" >1. NeXus: User Manual</a> &raquo;</li>
          <li><a href="design.html" >1.2. NeXus Design</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; <a href="copyright.html">Copyright</a> 2014, http://nexusformat.org.
      Last updated on 2014-10-02 14:43:08 CDT.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>